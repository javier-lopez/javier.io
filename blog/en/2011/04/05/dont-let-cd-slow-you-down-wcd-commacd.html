<!DOCTYPE html>
<html>
  <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="Javier López personal blog">
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>don’t let cd slow you down, cd wrappers: wcd, commacd | javier.io</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="don’t let cd slow you down, cd wrappers: wcd, commacd" />
<meta name="author" content="Javier López" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="don’t let cd slow you down, cd wrappers: wcd, commacd" />
<meta property="og:description" content="don’t let cd slow you down, cd wrappers: wcd, commacd" />
<link rel="canonical" href="javier.io/blog/en/2011/04/05/dont-let-cd-slow-you-down-wcd-commacd.html" />
<meta property="og:url" content="javier.io/blog/en/2011/04/05/dont-let-cd-slow-you-down-wcd-commacd.html" />
<meta property="og:site_name" content="javier.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-04-05T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="don’t let cd slow you down, cd wrappers: wcd, commacd" />
<meta name="twitter:site" content="@javier_flpz" />
<meta name="twitter:creator" content="@Javier López" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Javier López"},"dateModified":"2011-04-05T00:00:00+00:00","datePublished":"2011-04-05T00:00:00+00:00","description":"don’t let cd slow you down, cd wrappers: wcd, commacd","headline":"don’t let cd slow you down, cd wrappers: wcd, commacd","mainEntityOfPage":{"@type":"WebPage","@id":"javier.io/blog/en/2011/04/05/dont-let-cd-slow-you-down-wcd-commacd.html"},"url":"javier.io/blog/en/2011/04/05/dont-let-cd-slow-you-down-wcd-commacd.html"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="shortcut icon" href="//javier.io/favicon.ico">
    <link href='//fonts.googleapis.com/css?family=Exo+2:200|PT+Sans|Strait|Vollkorn|' rel='stylesheet' type='text/css'>
    <!--<link href='//fonts.googleapis.com/css?family=Megrim|Ruluko|Exo+2:200|PT+Sans|Strait|Vollkorn|' rel='stylesheet' type='text/css'>-->
    <link rel="alternate" type="application/atom+xml" href="/atom.xml">
    <link rel="stylesheet" type="text/css" href="/assets/css/default_black.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/responsive.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/fontawesome.min.css">

    <!-- syntax http://shjs.sourceforge.net/-->
    <link type="text/css" rel="stylesheet" href="/assets/css/shjs/sh_darkness.css">

    <title>don't let cd slow you down, cd wrappers: wcd, commacd</title>
  </head>

  <body onload="sh_highlightDocument('/assets/js/lang/', '.js');">
    <div id="header">
  <h1><a href="/blog/">Javier L&oacute;pez</a>
    <form>
      <input type="text" id="st-search-input" class="st-search-input"/>
    </form>
  </h1>

  <a href="/blog/en.html" class="red">[EN]</a> |
  <a href="/blog/pt.html" class="green">[PT]</a> |
  <a href="/blog/es.html" class="yellow">[ES]</a> |
  <a href="/atom.xml" class="rss">RSS</a> |

  

  <!-- Begin Swifttype -->
  <script type="text/javascript">
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'k64dV6Rm9QK4z8WnkrcN';
      Swiftype.inputElement = '#st-search-input';
      Swiftype.resultContainingElement = '#st-results-container';
      Swiftype.attachElement = '#st-search-input';
      Swiftype.renderStyle = "new_page";
      Swiftype.resultPageURL = "/blog/results/";

      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      entry.parentNode.insertBefore(script, entry);
    }());
  </script>
  <!-- End Swifttype -->


</div>


    <div id="content">
      <div id="post">
  <h2 id="dont-let-cd-slow-you-down-cd-wrappers-wcd-commacd">don’t let cd slow you down, cd wrappers: wcd, commacd</h2>

<h6 id="05-apr-2011">05 Apr 2011</h6>

<!--<iframe  class="showterm" src="http://showterm.io/ae29f68bee555cd89c65d" width="640" height="350">&nbsp;</iframe>-->

<p>Using a console interface to manage a computer has its disadvantages, some of them are specially visible when dealing with multiple files at the same time (moving/renaming/copying), typing long and crypted commands/options or moving around. On this entry I’ll talk about the last one.</p>

<p>The default <code class="language-plaintext highlighter-rouge">cd</code> behaviour on bash to change directories is quite strict, it requires to write full/relative paths and doesn’t recognize fuzzy search or any more complicated way of finding directories, some people use many <a href="https://github.com/relevance/etc/blob/master/bash/project_aliases.sh">aliases</a> to workaround these issues, others change its default shell or use third party tools, eg: <a href="https://github.com/clvv/fasd">fasd</a>, <a href="https://github.com/vigneshwaranr/bd">bd</a>, <a href="https://github.com/junegunn/fzf">fzf</a>, etc to create a semi automatic way of moving faster.</p>

<p>I prefer everything as minimalist and automatic as possible, so after reviewing lots of custom scripts, alternative shells and third party hacks, I think I’ve something good enough to write about and use on a daily basis.</p>

<p>All start by enabling semi hidden bash options for autocorrecting and autocompleting directories:</p>

<pre class="sh_sh">
$ head ~/.bashrc
# http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html
if [ "${BASH_VERSINFO}" -ge "4" ]; then
    shopt -s autocd cdspell dirspell
fi
</pre>

<p>Now, bash can autocomplete <strong>1/2/3/foo</strong> in the following scenarios:</p>

<pre class="sh_sh">
$ cd 1/2/3/foo
$ cd 1/2/3/ofo
$ 1/2/3/foo
</pre>

<p>Moving between important directories and parent directories can be optimized by adding some aliases:</p>

<pre class="sh_sh">
$ head ~/.alias.common
alias ..="cd .."
alias ....="cd ../.."
alias important.path="cd important/path"
</pre>

<p>Now it’s time for some major improvements. An important <a href="http://www.zsh.org">zsh</a> cd related feature is called pattern recognition, e.g. <strong>$ cd s<em>/m</em>/pl</strong> will become <strong>super/master/plan</strong>, that’s sweet, unfortunately bash is unable to recognize such patterns by itself, however with some <a href="http://wcd.sourceforge.net/">help</a> it can do it even better.</p>

<pre class="sh_sh">
$ sudo apt-get install wcd
$ head ~/.alias.common
alias cd='. wcd'
</pre>

<p><strong>wcd</strong> is not a binary, it’s a wrapper script around <code class="language-plaintext highlighter-rouge">wcd.exec</code> (available on the <code class="language-plaintext highlighter-rouge">wcd</code> package):</p>

<ul>
  <li><a href="https://github.com/javier-lopez/learn/blob/master/sh/tools/wcd">https://github.com/javier-lopez/learn/blob/master/sh/tools/wcd</a></li>
</ul>

<p>Once installed and configured, <strong>$ cd s<em>/m</em>/pl</strong> will take us to <strong>super/master/plan</strong> no matter what the current is, <a href="http://wcd.sourceforge.net/">wcd</a> works by creating an index file with all available directories and looking at it to find the best approximation.</p>

<p><strong>WARNING:</strong> Wcd will require to regenerate the index db every now and then, a cronjob with the following content can help:</p>

<pre class="sh_sh">
0 23 * * *  /usr/local/bin/update-cd
</pre>

<pre class="sh_sh">
$ cat /usr/local/bin/update-cd
#!/bin/sh
#description: update wcd db if available
#usage: update-cd

if [ -f "$(command -v "wcd")" ] &amp;&amp; [ -f "$(command -v "wcd.exec")" ]; then
    mkdir "${HOME}"/.wcd; wcd.exec -GN -j -xf "${HOME}"/.ban.wcd -S "${HOME}"
    [ -f "${HOME}"/.treedata.wcd ] &amp;&amp; mv "${HOME}"/.treedata.wcd "${HOME}"/.wcd/
fi
</pre>

<p>Been able to move to any directory from anywhere is really helpful, however sometimes it’s desirable to move around parents and nearby directories efficiently, that’s where <a href="https://github.com/shyiko/commacd">commacd</a> get in. With <code class="language-plaintext highlighter-rouge">commacd</code> several aliases (<code class="language-plaintext highlighter-rouge">,</code>, <code class="language-plaintext highlighter-rouge">,,</code> and <code class="language-plaintext highlighter-rouge">,,,</code>) are defined which can be used on the following scenarios:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ , /u/l/b #moving through multiple directories
=&gt; cd /usr/local/bin
$ , d #moving through multiple directories with the same name
=&gt; 1 Desktop
   2 Downloads
   : &lt;type index of the directory to cd into&gt;
~/code/projects/zion/src/module $ ,, #going up till a project directory is found (git/hg/svn based)
=&gt; cd ~/code/projects/zion
~/code/projects/zion/src/module $ ,, pro #going into the first parent directory named pro*
=&gt; cd ~/code/projects
~/code/projects/zion/src/module $ ,, zion matrix #subtituing the current path and going into the result
=&gt; cd ~/code/projects/matrix/src/module
~/code/projects/zion/src/module $ ,,, matrix/tests #going into a sibling directory who has the same parent directory
=&gt; cd ~/code/projects/matrix/tests/
</code></pre></div></div>

<p>As wcd, <code class="language-plaintext highlighter-rouge">commacd</code> is a script who can be downloaded from:</p>

<ul>
  <li><a href="https://raw.githubusercontent.com/shyiko/commacd/master/commacd.bash">https://raw.githubusercontent.com/shyiko/commacd/master/commacd.bash</a></li>
</ul>

<p>Or to get my personal version:</p>

<ul>
  <li><a href="https://raw.githubusercontent.com/javier-lopez/learn/master/sh/tools/commacd">https://raw.githubusercontent.com/javier-lopez/learn/master/sh/tools/commacd</a></li>
</ul>

<p>Upon getting any of them, the script should be used as an alias (due to the nature of the <code class="language-plaintext highlighter-rouge">cd</code> built-in), eg, <strong>~/bashrc</strong>:</p>

<pre class="sh_sh">
if [ -f "$(command -v "commacd")" ]; then
    . commacd
    alias ,=_commacd_forward
    alias ,,=_commacd_backward
    alias ,,,=_commacd_backward_forward
fi
</pre>

<p>That’s it, now moving around should feel less archaic, happy cli browsing 😄</p>

</div>

<div id="related">
  <h5>Related Entries:</h5>
  <ul class="related-posts">
    
    <li><span>01 Jan 2012</span> &raquo; <a href="/blog/en/2012/01/01/bash-autocompletion.html">bash autocompletion</a></li>
    
    <li><span>22 Aug 2018</span> &raquo; <a href="/blog/en/2018/08/22/minos-a-tiling-wm-linux-distro.html">minos, a tiling wm linux distribution</a></li>
    
    <li><span>22 Feb 2014</span> &raquo; <a href="/blog/en/2014/02/22/awk.html">the most portable language in the world, awk</a></li>
    
  </ul>
</div>

    <div id="disqus">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'javierlopez'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
     </script>
     <noscript>Enable JavaScript to see/create comments</noscript>
    </div>


    </div>

    
<div id="footer">

  <div class="link" align="right">
    <a href="//javier.io/blog"><i class="icon-pencil"></i></a>
    <a href="//javier.io/pgp"><i class="icon-key"></i></a>
    <a href="//javier.io/twitter"><i class="icon-twitter"></i></a>
    <a href="//javier.io/github"><i class="icon-github-alt"></i></a>
  </div>
</div>

    

    <!-- syntax http://shjs.sourceforge.net/-->
    <script type="text/javascript" src="/assets/js/shjs/shjs_main.js"></script>

    <!-- lightbox http://gettopup.com, the other part of the lib is called in the post.html file-->
    <script type="text/javascript" src="/assets/js/top-up/top_up-min.js"></script>
    <script type="text/javascript">TopUp.host = "//javier.io/";</script>
    <script type="text/javascript">TopUp.images_path = "assets/js/top-up/images/";</script>
    <script type="text/javascript">
      TopUp.addPresets({
          "#content strong a": {
            readAltText: 1,
            effect: "clip",
            overlayClose: 0,
            shaded: 1,
            group: "img"
          }
    });
    </script>

    <!-- google analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-47664650-1']);
      _gaq.push(['_trackPageview']);

      (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
       })();
    </script>

  </body>
</html>
