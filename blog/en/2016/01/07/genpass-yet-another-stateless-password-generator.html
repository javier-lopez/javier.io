<!DOCTYPE html>
<html>
  <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="Javier L√≥pez personal blog">
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>genpass, yet another stateless password generator | javier.io</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="genpass, yet another stateless password generator" />
<meta name="author" content="Javier L√≥pez" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="genpass, yet another stateless password generator" />
<meta property="og:description" content="genpass, yet another stateless password generator" />
<link rel="canonical" href="javier.io/blog/en/2016/01/07/genpass-yet-another-stateless-password-generator.html" />
<meta property="og:url" content="javier.io/blog/en/2016/01/07/genpass-yet-another-stateless-password-generator.html" />
<meta property="og:site_name" content="javier.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-01-07T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="genpass, yet another stateless password generator" />
<meta name="twitter:site" content="@javier_flpz" />
<meta name="twitter:creator" content="@Javier L√≥pez" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Javier L√≥pez"},"dateModified":"2016-01-07T00:00:00+00:00","datePublished":"2016-01-07T00:00:00+00:00","description":"genpass, yet another stateless password generator","headline":"genpass, yet another stateless password generator","mainEntityOfPage":{"@type":"WebPage","@id":"javier.io/blog/en/2016/01/07/genpass-yet-another-stateless-password-generator.html"},"url":"javier.io/blog/en/2016/01/07/genpass-yet-another-stateless-password-generator.html"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="shortcut icon" href="//javier.io/favicon.ico">
    <link href='//fonts.googleapis.com/css?family=Exo+2:200|PT+Sans|Strait|Vollkorn|' rel='stylesheet' type='text/css'>
    <!--<link href='//fonts.googleapis.com/css?family=Megrim|Ruluko|Exo+2:200|PT+Sans|Strait|Vollkorn|' rel='stylesheet' type='text/css'>-->
    <link rel="alternate" type="application/atom+xml" href="/atom.xml">
    <link rel="stylesheet" type="text/css" href="/assets/css/default_black.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/responsive.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/fontawesome.min.css">

    <!-- syntax http://shjs.sourceforge.net/-->
    <link type="text/css" rel="stylesheet" href="/assets/css/shjs/sh_darkness.css">

    <title>genpass, yet another stateless password generator</title>
  </head>

  <body onload="sh_highlightDocument('/assets/js/lang/', '.js');">
    <div id="header">
  <h1><a href="/blog/">Javier L&oacute;pez</a>
    <form>
      <input type="text" id="st-search-input" class="st-search-input"/>
    </form>
  </h1>

  <a href="/blog/en.html" class="red">[EN]</a> |
  <a href="/blog/pt.html" class="green">[PT]</a> |
  <a href="/blog/es.html" class="yellow">[ES]</a> |
  <a href="/atom.xml" class="rss">RSS</a> |

  

  <!-- Begin Swifttype -->
  <script type="text/javascript">
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'k64dV6Rm9QK4z8WnkrcN';
      Swiftype.inputElement = '#st-search-input';
      Swiftype.resultContainingElement = '#st-results-container';
      Swiftype.attachElement = '#st-search-input';
      Swiftype.renderStyle = "new_page";
      Swiftype.resultPageURL = "/blog/results/";

      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      entry.parentNode.insertBefore(script, entry);
    }());
  </script>
  <!-- End Swifttype -->


</div>


    <div id="content">
      <div id="post">
  <h2 id="genpass-yet-another-stateless-password-generator">genpass, yet another stateless password generator</h2>

<h6 id="07-jan-2016">07 Jan 2016</h6>

<p>Since some time I‚Äôve realized I‚Äôm pretty bad at memorizing strong passwords, as a result I‚Äôve been using an unique moderated strong ‚Äúmaster‚Äù password and I‚Äôve derived others by using a shell alias:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ alias getpass='_getpass() { _g=$(printf "%s" "${*}" | \
    md5sum | openssl enc -base64     | \
    cut -c1-20); printf "%s" "${_g}" | \
    xclip -selection clipboard 2&gt;/dev/null || \
    printf "%s\\n" "${_g}"; }; _getpass'
</code></pre></div></div>

<p>I knew than the resulting passwords weren‚Äôt really good at keeping my master password secure, after all, md5 hashing is extremely fast and with known <a href="http://www.mscs.dal.ca/~selinger/md5collision/">collision</a> <a href="http://natmchugh.blogspot.mx/2015/02/create-your-own-md5-collisions.html">problems</a>, even worse, I didn‚Äôt even iterate over it. So I keep it in secret till I had the time or willingness to use an informed solution. During the last month I‚Äôve been reviewing the state of art of password generation schemes and found than some <a href="https://en.wikipedia.org/wiki/Bcrypt">derivation</a> <a href="https://en.wikipedia.org/wiki/Scrypt">functions</a> have been designed specifically for this task. So I converted the shell alias to a C program and <a href="https://github.com/javier-lopez/genpass">genpass</a> is the result.</p>

<p>Genpass is by no means original, however when looking around I found than most password generators were plain broken, most of them were iterating fast checksum functions, md5, sha1, sha512, etc, or the ones using either bcrypt or scrypt used hard-coded parameters which could make them vulnerable to future computers. Using a slow key derivation function is as practical as the user is willing to wait, so often more secure default parameters aren‚Äôt used because it would make the derivation painfully slow. Fortunately some smart guys have found this <a href="https://www.cs.utexas.edu/%7Ebwaters/publications/papers/www2005.pdf">problem before</a> and have suggested to use a cache key to accelerate the process for legitimate users. That‚Äôs what genpass uses to propose the following paranoid defaults.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Cache cost (Scrypt N)</td>
      <td>2^20</td>
    </tr>
    <tr>
      <td>Cost       (Scrypt N)</td>
      <td>2^14</td>
    </tr>
    <tr>
      <td>Scrypt r</td>
      <td>8 bits</td>
    </tr>
    <tr>
      <td>Scrypt p</td>
      <td>16 bits</td>
    </tr>
    <tr>
      <td>Key length</td>
      <td>32 bytes, 256 bits</td>
    </tr>
    <tr>
      <td>Encoding</td>
      <td>z85</td>
    </tr>
  </tbody>
</table>

<p>It‚Äôs still convenient to use your own parameters, as the default settings will change as computers get updated on CPU/RAM.</p>

<h3 id="usage">Usage</h3>

<p><a href="https://raw.githubusercontent.com/javier-lopez/genpass/master/genpass.gif"><img src="https://raw.githubusercontent.com/javier-lopez/genpass/master/genpass.gif" alt="" style="border: 1px solid white;margin-bottom: 3%;" /></a>
<!--$ genpass-->
<!--Name: Guy Mann-->
<!--Site: github.com-->
<!--Master password: passwd #it won't be shown-->
<!--4c%7hZ5w]MZUB6RRPCJ&?wKTFtd[6Oj.P.02d+kIs--></p>

<p>The first time to be executed it will take a relative long time (a couple of minutes) to get back. It‚Äôll create a cache key and will save it to <code class="language-plaintext highlighter-rouge">~/.genpass-cache</code> (this path can be customized), then it will combine it with the master password and the site string to generate the final password, which can be in several encodings (z85 by default). The cache key file should be guarded with moderate caution, if it gets leaked possible attackers may have an easier time guessing the master password (although it still will be considerably harder than average brute force attacks). Later invocations will be instantly (taking on average 0.1secs). This way the scheme strives for the best balance between security and usability.</p>

<p>I‚Äôve also added a <code class="language-plaintext highlighter-rouge">getpass</code> wrapper which paste the resulting password to the system clipboard and sets a timeout (10 seconds by default) after which the password is removed.</p>

<h3 id="installation">Installation</h3>

<h5 id="ubuntu-based-systems-lts">Ubuntu based systems (LTS)</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo add-apt-repository ppa:minos-archive/main
$ sudo apt-get update &amp;&amp; sudo apt-get install genpass
</code></pre></div></div>

<h5 id="other-linux-distributions-static-binaries">Other Linux distributions, static binaries</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sh &lt;(wget -qO- s.minos.io/s) -x genpass
</code></pre></div></div>

<h5 id="from-source">From source</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make
</code></pre></div></div>

<p>That‚Äôs it, happy password generation üòã</p>

<p>References</p>

<ul>
  <li><a href="https://github.com/javier-lopez/genpass">genpass</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Bcrypt">bcrypt</a>, slow key derivation function</li>
  <li><a href="https://en.wikipedia.org/wiki/Scrypt">scrypt</a>, slow key derivation function</li>
  <li><a href="https://www.pwdhash.com/">pwdhash</a>, md5 based password generator, js</li>
  <li><a href="http://www.supergenpass.com/">supergenpass</a>, md5 iteration based password generator, js</li>
  <li><a href="http://passwordmaker.org">passwordmaker</a>, md5, sha1, sha256, <a href="http://passwordmaker.org/FAQ#Which_hash_algorithms_are_supported.3F">etc</a> based password generator, several implementations</li>
  <li><a href="http://masterpasswordapp.com/">masterpassword</a>, hard-coded scrypt based password generator, several implementations</li>
  <li><a href="https://github.com/kaepora/npwd">npwd</a>, hard-coded scrypt based password generator, Nodejs</li>
  <li><a href="https://github.com/postboy/cpwd">cpwd</a>, hard-coded scrypt based password generator, C</li>
</ul>

</div>

<div id="related">
  <h5>Related Entries:</h5>
  <ul class="related-posts">
    
    <li><span>22 Aug 2018</span> &raquo; <a href="/blog/en/2018/08/22/minos-a-tiling-wm-linux-distro.html">minos, a tiling wm linux distribution</a></li>
    
    <li><span>26 Jan 2014</span> &raquo; <a href="/blog/en/2014/01/26/introduction-to-drupal-7-installation-profiles.html">introduction to drupal 7 installation profiles</a></li>
    
    <li><span>01 Jan 2012</span> &raquo; <a href="/blog/en/2012/01/01/bash-autocompletion.html">bash autocompletion</a></li>
    
  </ul>
</div>

    <div id="disqus">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'javierlopez'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
     </script>
     <noscript>Enable JavaScript to see/create comments</noscript>
    </div>


    </div>

    
<div id="footer">

  <div class="link" align="right">
    <a href="//javier.io/blog"><i class="icon-pencil"></i></a>
    <a href="//javier.io/pgp"><i class="icon-key"></i></a>
    <a href="//javier.io/twitter"><i class="icon-twitter"></i></a>
    <a href="//javier.io/github"><i class="icon-github-alt"></i></a>
  </div>
</div>

    

    <!-- syntax http://shjs.sourceforge.net/-->
    <script type="text/javascript" src="/assets/js/shjs/shjs_main.js"></script>

    <!-- lightbox http://gettopup.com, the other part of the lib is called in the post.html file-->
    <script type="text/javascript" src="/assets/js/top-up/top_up-min.js"></script>
    <script type="text/javascript">TopUp.host = "//javier.io/";</script>
    <script type="text/javascript">TopUp.images_path = "assets/js/top-up/images/";</script>
    <script type="text/javascript">
      TopUp.addPresets({
          "#content strong a": {
            readAltText: 1,
            effect: "clip",
            overlayClose: 0,
            shaded: 1,
            group: "img"
          }
    });
    </script>

    <!-- google analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-47664650-1']);
      _gaq.push(['_trackPageview']);

      (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
       })();
    </script>

  </body>
</html>
